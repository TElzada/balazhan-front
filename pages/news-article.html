<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Новость</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../styles/style.css">
</head>
<body>
<main class="container my-4">
  <a class="btn btn-link mb-3" href="news.html">← Все новости</a>
  <article id="newsArticle"></article>
</main>

<script>
  (async function(){
    const params = new URLSearchParams(location.search);
    const slug = params.get('slug');
    const container = document.getElementById('newsArticle');

    if(!slug) {
      container.innerHTML = '<p class="text-danger">Не указан slug новости.</p>';
      return;
    }

    try {
      const res = await fetch('data/news.json');
      if(!res.ok) throw new Error('Не удалось загрузить news.json');
      const list = await res.json();
      const it = list.find(x => x.slug === slug);
      if(!it) {
        container.innerHTML = '<p class="text-muted">Новость не найдена.</p>';
        return;
      }

      container.innerHTML = `
        <div class="card p-3">
          ${ it.imageUrl ? `<img src="${it.imageUrl}" alt="${it.title}" class="img-fluid mb-3 rounded">` : '' }
          <h1>${it.title}</h1>
          <div class="text-muted small mb-2">${it.date}</div>
          <div class="mb-3">${it.content || ''}</div>
        </div>
      `;

    } catch (e) {
      console.error(e);
      container.innerHTML = '<p class="text-danger">Ошибка загрузки новости.</p>';
    }
  })();
</script>
</body>
</html>
